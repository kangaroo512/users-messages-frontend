
<form (ngSubmit)="onSubmit(userDTOForm)" #userDTOForm="ngForm">

    @if(errors['nickname']) {
        <p>{{errors['nickname']}}</p>
    }
    <div class="form-floating mb-3">
        <input type="text" name="nickname" [(ngModel)]="user.nickname" class="form-control" id="nickname" placeholder="nickname" required>
        
    </div>



    <div class="form-floating mb-3">

    </div>

    @if(errors['location.country']) {
        <p>{{errors['location.country']}}</p>
    }
    <div class="form-floating mb-3">
        <select id="country" [(ngModel)]="user.location.country" name="country" class="form-control small-flex">

<option value='AFGHANISTAN'>Afghanistan</option>
<option value='ALBANIA'>Albania</option>
<option value='ALGERIA'>Algeria</option>
<option value='ANDORRA'>Andorra</option>
<option value='ANGOLA'>Angola</option>
<option value='ANTIGUA_AND_BARBUDA'>Antigua And Barbuda</option>
<option value='ARGENTINA'>Argentina</option>
<option value='ARMENIA'>Armenia</option>
<option value='AUSTRALIA'>Australia</option>
<option value='AUSTRIA'>Austria</option>
<option value='AZERBAIJAN'>Azerbaijan</option>
<option value='BAHAMAS'>Bahamas</option>
<option value='BAHRAIN'>Bahrain</option>
<option value='BANGLADESH'>Bangladesh</option>
<option value='BARBADOS'>Barbados</option>
<option value='BELARUS'>Belarus</option>
<option value='BELGIUM'>Belgium</option>
<option value='BELIZE'>Belize</option>
<option value='BENIN'>Benin</option>
<option value='BHUTAN'>Bhutan</option>
<option value='BOLIVIA'>Bolivia</option>
<option value='BOSNIA_AND_HERZEGOVINA'>Bosnia And Herzegovina</option>
<option value='BOTSWANA'>Botswana</option>
<option value='BRAZIL'>Brazil</option>
<option value='BRUNEI'>Brunei</option>
<option value='BULGARIA'>Bulgaria</option>
<option value='BURKINA_FASO'>Burkina Faso</option>
<option value='BURUNDI'>Burundi</option>
<option value='CABO_VERDE'>Cabo Verde</option>
<option value='CAMBODIA'>Cambodia</option>
<option value='CAMEROON'>Cameroon</option>
<option value='CANADA'>Canada</option>
<option value='CENTRAL_AFRICAN_REPUBLIC'>Central African Republic</option>
<option value='CHAD'>Chad</option>
<option value='CHILE'>Chile</option>
<option value='CHINA'>China</option>
<option value='COLOMBIA'>Colombia</option>
<option value='COMOROS'>Comoros</option>
<option value='CONGO_DEMOCRATIC_REPUBLIC'>Congo Democratic Republic</option>
<option value='CONGO_REPUBLIC'>Congo Republic</option>
<option value='COSTA_RICA'>Costa Rica</option>
<option value='COTE_DIVOIRE'>Cote Divoire</option>
<option value='CROATIA'>Croatia</option>
<option value='CUBA'>Cuba</option>
<option value='CYPRUS'>Cyprus</option>
<option value='CZECHIA'>Czechia</option>
<option value='DENMARK'>Denmark</option>
<option value='DJIBOUTI'>Djibouti</option>
<option value='DOMINICA'>Dominica</option>
<option value='DOMINICAN_REPUBLIC'>Dominican Republic</option>
<option value='ECUADOR'>Ecuador</option>
<option value='EGYPT'>Egypt</option>
<option value='EL_SALVADOR'>El Salvador</option>
<option value='EQUATORIAL_GUINEA'>Equatorial Guinea</option>
<option value='ERITREA'>Eritrea</option>
<option value='ESTONIA'>Estonia</option>
<option value='ESWATINI'>Eswatini</option>
<option value='ETHIOPIA'>Ethiopia</option>
<option value='FIJI'>Fiji</option>
<option value='FINLAND'>Finland</option>
<option value='FRANCE'>France</option>
<option value='GABON'>Gabon</option>
<option value='GAMBIA'>Gambia</option>
<option value='GEORGIA'>Georgia</option>
<option value='GERMANY'>Germany</option>
<option value='GHANA'>Ghana</option>
<option value='GREECE'>Greece</option>
<option value='GRENADA'>Grenada</option>
<option value='GUATEMALA'>Guatemala</option>
<option value='GUINEA'>Guinea</option>
<option value='GUINEA_BISSAU'>Guinea Bissau</option>
<option value='GUYANA'>Guyana</option>
<option value='HAITI'>Haiti</option>
<option value='HONDURAS'>Honduras</option>
<option value='HUNGARY'>Hungary</option>
<option value='ICELAND'>Iceland</option>
<option value='INDIA'>India</option>
<option value='INDONESIA'>Indonesia</option>
<option value='IRAN'>Iran</option>
<option value='IRAQ'>Iraq</option>
<option value='IRELAND'>Ireland</option>
<option value='ISRAEL'>Israel</option>
<option value='ITALY'>Italy</option>
<option value='JAMAICA'>Jamaica</option>
<option value='JAPAN'>Japan</option>
<option value='JORDAN'>Jordan</option>
<option value='KAZAKHSTAN'>Kazakhstan</option>
<option value='KENYA'>Kenya</option>
<option value='KIRIBATI'>Kiribati</option>
<option value='KOREA_NORTH'>Korea North</option>
<option value='KOREA_SOUTH'>Korea South</option>
<option value='KOSOVO'>Kosovo</option>
<option value='KUWAIT'>Kuwait</option>
<option value='KYRGYZSTAN'>Kyrgyzstan</option>
<option value='LAOS'>Laos</option>
<option value='LATVIA'>Latvia</option>
<option value='LEBANON'>Lebanon</option>
<option value='LESOTHO'>Lesotho</option>
<option value='LIBERIA'>Liberia</option>
<option value='LIBYA'>Libya</option>
<option value='LIECHTENSTEIN'>Liechtenstein</option>
<option value='LITHUANIA'>Lithuania</option>
<option value='LUXEMBOURG'>Luxembourg</option>
<option value='MADAGASCAR'>Madagascar</option>
<option value='MALAWI'>Malawi</option>
<option value='MALAYSIA'>Malaysia</option>
<option value='MALDIVES'>Maldives</option>
<option value='MALI'>Mali</option>
<option value='MALTA'>Malta</option>
<option value='MARSHALL_ISLANDS'>Marshall Islands</option>
<option value='MAURITANIA'>Mauritania</option>
<option value='MAURITIUS'>Mauritius</option>
<option value='MEXICO'>Mexico</option>
<option value='MICRONESIA'>Micronesia</option>
<option value='MOLDOVA'>Moldova</option>
<option value='MONACO'>Monaco</option>
<option value='MONGOLIA'>Mongolia</option>
<option value='MONTENEGRO'>Montenegro</option>
<option value='MOROCCO'>Morocco</option>
<option value='MOZAMBIQUE'>Mozambique</option>
<option value='MYANMAR'>Myanmar</option>
<option value='NAMIBIA'>Namibia</option>
<option value='NAURU'>Nauru</option>
<option value='NEPAL'>Nepal</option>
<option value='NETHERLANDS'>Netherlands</option>
<option value='NEW_ZEALAND'>New Zealand</option>
<option value='NICARAGUA'>Nicaragua</option>
<option value='NIGER'>Niger</option>
<option value='NIGERIA'>Nigeria</option>
<option value='NORTH_MACEDONIA'>North Macedonia</option>
<option value='NORWAY'>Norway</option>
<option value='OMAN'>Oman</option>
<option value='PAKISTAN'>Pakistan</option>
<option value='PALAU'>Palau</option>
<option value='PALESTINE'>Palestine</option>
<option value='PANAMA'>Panama</option>
<option value='PAPUA_NEW_GUINEA'>Papua New Guinea</option>
<option value='PARAGUAY'>Paraguay</option>
<option value='PERU'>Peru</option>
<option value='PHILIPPINES'>Philippines</option>
<option value='POLAND'>Poland</option>
<option value='PORTUGAL'>Portugal</option>
<option value='QATAR'>Qatar</option>
<option value='ROMANIA'>Romania</option>
<option value='RUSSIA'>Russia</option>
<option value='RWANDA'>Rwanda</option>
<option value='SAINT_KITTS_AND_NEVIS'>Saint Kitts And Nevis</option>
<option value='SAINT_LUCIA'>Saint Lucia</option>
<option value='SAINT_VINCENT_AND_THE_GRENADINES'>Saint Vincent And The Grenadines</option>
<option value='SAMOA'>Samoa</option>
<option value='SAN_MARINO'>San Marino</option>
<option value='SAO_TOME_AND_PRINCIPE'>Sao Tome And Principe</option>
<option value='SAUDI_ARABIA'>Saudi Arabia</option>
<option value='SENEGAL'>Senegal</option>
<option value='SERBIA'>Serbia</option>
<option value='SEYCHELLES'>Seychelles</option>
<option value='SIERRA_LEONE'>Sierra Leone</option>
<option value='SINGAPORE'>Singapore</option>
<option value='SLOVAKIA'>Slovakia</option>
<option value='SLOVENIA'>Slovenia</option>
<option value='SOLOMON_ISLANDS'>Solomon Islands</option>
<option value='SOMALIA'>Somalia</option>
<option value='SOUTH_AFRICA'>South Africa</option>
<option value='SOUTH_SUDAN'>South Sudan</option>
<option value='SPAIN'>Spain</option>
<option value='SRI_LANKA'>Sri Lanka</option>
<option value='SUDAN'>Sudan</option>
<option value='SURINAME'>Suriname</option>
<option value='SWEDEN'>Sweden</option>
<option value='SWITZERLAND'>Switzerland</option>
<option value='SYRIA'>Syria</option>
<option value='TAIWAN'>Taiwan</option>
<option value='TAJIKISTAN'>Tajikistan</option>
<option value='TANZANIA'>Tanzania</option>
<option value='THAILAND'>Thailand</option>
<option value='TIMOR_LESTE'>Timor Leste</option>
<option value='TOGO'>Togo</option>
<option value='TONGA'>Tonga</option>
<option value='TRINIDAD_AND_TOBAGO'>Trinidad And Tobago</option>
<option value='TUNISIA'>Tunisia</option>
<option value='TURKEY'>Turkey</option>
<option value='TURKMENISTAN'>Turkmenistan</option>
<option value='TUVALU'>Tuvalu</option>
<option value='UGANDA'>Uganda</option>
<option value='UKRAINE'>Ukraine</option>
<option value='UNITED_ARAB_EMIRATES'>United Arab Emirates</option>
<option value='UNITED_KINGDOM'>United Kingdom</option>
<option value='UNITED_STATES'>United States</option>
<option value='URUGUAY'>Uruguay</option>
<option value='UZBEKISTAN'>Uzbekistan</option>
<option value='VANUATU'>Vanuatu</option>
<option value='VATICAN_CITY'>Vatican City</option>
<option value='VENEZUELA'>Venezuela</option>
<option value='VIETNAM'>Vietnam</option>
<option value='YEMEN'>Yemen</option>
<option value='ZAMBIA'>Zambia</option>
<option value='ZIMBABWE'>Zimbabwe</option>
        </select>
    </div>

    @if(errors['location.town']) {
        <p>{{errors['location.town']}}</p>
    }
    <div class="form-floating mb-3">
        <input type="text" name="town" placeholder="town" [(ngModel)]="user.location.town" class="form-control">
    </div>

    @if(errors['location.stateProvince']) {
        <p>{{errors['location.stateProvince']}}</p>
    }
    <div class="form-floating mb-3">
        <input type="text" name="state" placeholder="state" [(ngModel)]="user.location.stateProvince" class="form-control">
    </div>

    @if(errors['gender']) {
        <p>{{errors['gender']}}</p>
    }
    <div class="form-floating mb-3"
    >
        <select class="form-control small-flex" name="gender" [(ngModel)]="user.gender">
        <option disabled selected>Gender</option>
        <option 
        *ngFor="let l of genders; let i = index" 

        id="gender-{{i}}">{{l}}</option>
        </select>
    </div>

    @if(errors['email']) {
        <p>{{errors['email']}}</p>
    }
    <div class="form-floating mb-3">
        <input type="email" name="email" [(ngModel)]="user.email" class="form-control" id="email" placeholder="email">
        
    </div>

    <!-- ADD A CALENDAR SELECTOR -->
     @if(errors['birthDate']) {
        <p>{{errors['birthDate']}}</p>
     }
    <div class="form-floating mb-3">
        <input type="date" name="birthdate" [(ngModel)]="user.birthDate" class="form-control" id="birthdate" placeholder="birthdate">
    </div>




    

    <!-- 
    <button type="button" class="btn btn-secondary" (click)="addField()">Add a new language</button>
    
      <div *ngFor="let language of user.nativeLanguages; let i = index">
        <input [(ngModel)]="user.nativeLanguages[i]" placeholder="Enter value" name="{{i}}" class="form-control" plaeholder="enter a language">

        <button type="button" class="btn btn-secondary" (click)="deleteField(i)">Delete</button>
    </div>  
    
    -->

    @if(validateLanguageErrors()) {
        <p>Complete the language information, you son of a fucking bitch!</p>
    }
    <!-- NATIVE LANGUAGE -->
    <button type="button" class="btn btn-secondary" (click)="addField()">Add a new native language</button>



    <div *ngFor="let lang of userNativeLanguages; let i = index" class="language-select-wrapper">

        <!-- PROFICIENCY VALIDATOR -->
        <div *ngIf="userDTOForm.submitted && (languageNat.touched || languageNat.invalid)">
            <small *ngIf="languageNat.invalid">
                A proficiency is requried
            </small>
        </div>
        <!-- PROFICIENCY VALIDATOR -->
        
        <select
        class="form-control small-flex"
        [(ngModel)]="userNativeLanguages[i].language"
        name="nativeLanguage{{i}}"
        required
        #languageNat="ngModel"
        >
        <option value="">-- Select a language --</option>
        <option *ngFor="let l of languages" [ngValue]="l">
            {{l.name}}
        </option>
        </select>
        <button type="button" class="btn btn-secondary" (click)="deleteField(i)">Delete</button>
    </div>



    <!-- PRACTICE LANGUAGE -->

    <button type="button" class="btn btn-secondary" (click)="addPracticeField()">Add a new Practice language</button>

    <div *ngFor="let lang of userPracticeLanguages; let i = index" class="language-select-wrapper">

        <div *ngIf="submitted && (languageFer.touched || languageFer.invalid)">
            <small *ngIf="languageFer.invalid">A language is required</small>
        </div>
        
        <select
        class="form-control small-flex"
        [(ngModel)]="userPracticeLanguages[i].language"
        name="languagePractice{{i}}"
        required
        #languageFer="ngModel"
        >
        <option value="">-- Select a language --</option>
        <option *ngFor="let l of languages" [ngValue]="l">
            {{l.name}}
        </option>
        </select>

        <!-- PROFICIENCY VALIDATOR -->
        <div *ngIf="userDTOForm.submitted && (languageFer.touched || languageFer.invalid)">
            <small *ngIf="languageFer.invalid">
                A proficiency is requried
            </small>
        </div>
        <!-- PROFICIENCY VALIDATOR -->

        <select
        class="form-control small-flex"
        [(ngModel)]="userPracticeLanguages[i].proficiencyLevel"
        name="languagePracticeProciciency{{i}}"
        required
        #languageFer="ngModel"
        >
        <option value="">-- Select a proficiency --</option>
        <option *ngFor="let p of proficiencies" [ngValue]="p">
            {{p}}
        </option>
        </select>
        <button type="button" class="btn btn-secondary" (click)="deletePracticeField(i)">Delete</button>
    </div>

<!-- TYPE OF EXCHANGE -->
    <div>
        @if(errors['typeOfExchange.faceToFaceConversation']) {
            <p>Value required</p>
        }
        <label for="facetoface">Face To Face</label>
        <select class="form-control small-flex" name="facetoface" id="facetoface" [(ngModel)]="user.typeOfExchange.faceToFaceConversation">
            <option value="false">No</option>
            <option value="true">Yes</option>
        </select>

        @if(errors['typeOfExchange.correspondencePenPal']) {
            <p>Value required</p>
        }
        <label for="correspondance">Correspondance</label>
        <select class="form-control small-flex" name="correspondance" id="correspondance" [(ngModel)]="user.typeOfExchange.correspondencePenPal">
            <option value="false">No</option>
            <option value="true">Yes</option>
        </select>

        @if(errors['typeOfExchange.chatSoftware']) {
            <p>Value required</p>
        }
        <label for="chatsoftware">Chat Software</label>
        <select
        class="form-control small-flex" 
        name="chatsoftware" 
        id="chatsoftware"
        [(ngModel)]="user.typeOfExchange.chatSoftware">
            <option value="false">No</option>
            <option *ngFor="let c of chatSoftwares; let i = index" [value]="c">{{formatChatSoftwareOption(c)}}</option>
        </select>
    </div>

    <!-- HOBBIES -->
    @if(errors['hobbies']) {
        <p>You must enter at least one hobby</p>
    }
    
    <div class="form-flaoting mb-3">
        <input 
        type="text" 
        name="hobbies"
        class="form-control" 
        [(ngModel)]="hobbiesInput"
        (blur) = "processHobbies()" 
        placeholder="write your hobbies">
        <label for="example">Example: tennis,videogames,reading</label>
    </div>

    <!-- DESCRIPTION -->
    @if(errors['description']) {
        You must enter a description
    }
    <div>
        <label for="description">Description</label>
        <textarea 
        name="description" 
        id="description"
        class="form-control"
        [(ngModel)]="user.description"
        [attr.maxLength]="500"
        rows="5"
        placeHolder="Write a brief description">
        </textarea>
        <small class="text-muted">{{user.description ? user.description.length : 0}}/500 characters</small>
    </div>

    <!-- PASSWORD -->
    @if(errors['password']) {
        <p>{{errors['password']}}</p>
    }
    <div class="form-floating mb-3">
        <input type="password" name="password" [(ngModel)]="user.password" class="form-control" id="password" placeholder="password">
        
    </div>

    <button type="submit">Submit</button>

</form>


